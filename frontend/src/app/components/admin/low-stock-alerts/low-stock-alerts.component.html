<div class="alerts-container">
  <div class="alerts-header">
    <div>
      <h2>
        <i class="bi bi-exclamation-triangle-fill"></i>
        Low Stock Alerts
      </h2>
      <p class="subtitle">Monitor and manage products with low inventory levels</p>
    </div>
    <button class="btn btn-primary" (click)="refreshAlerts()" [disabled]="loading">
      <i class="bi bi-arrow-clockwise"></i> Refresh Alerts
    </button>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-state">
    <div class="spinner"></div>
    <p>Loading alerts...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && alerts.length === 0" class="empty-state">
    <i class="bi bi-check-circle"></i>
    <h3>All Good!</h3>
    <p>No low stock alerts at the moment. All products are well-stocked.</p>
  </div>

  <!-- Alerts List -->
  <div *ngIf="!loading && alerts.length > 0" class="alerts-grid">
    <div *ngFor="let alert of alerts" class="alert-card" [ngClass]="getStockStatus(alert)">
      <div class="alert-icon">
        <i class="bi bi-exclamation-circle-fill"></i>
      </div>
      
      <div class="alert-content">
        <div class="product-info">
          <h3 class="product-name">{{ alert.product.name }}</h3>
          <p class="product-brand">{{ alert.product.brand }}</p>
        </div>

        <div class="stock-info">
          <div class="stock-row">
            <span class="label">Current Stock:</span>
            <span class="value stock-value" [ngClass]="getStockStatus(alert)">
              {{ alert.currentStock }} units
            </span>
          </div>
          <div class="stock-row">
            <span class="label">Threshold:</span>
            <span class="value">{{ alert.threshold }} units</span>
          </div>
          <div class="stock-row">
            <span class="label">Alert Date:</span>
            <span class="value">{{ formatDate(alert.alertDate) }}</span>
          </div>
        </div>

        <div class="alert-actions">
          <button class="btn btn-resolve" (click)="openResolveModal(alert)">
            <i class="bi bi-check-lg"></i> Mark as Resolved
          </button>
        </div>
      </div>

      <div class="status-badge" [ngClass]="getStockStatus(alert)">
        <span *ngIf="getStockStatus(alert) === 'out-of-stock'">OUT OF STOCK</span>
        <span *ngIf="getStockStatus(alert) === 'critical'">CRITICAL</span>
        <span *ngIf="getStockStatus(alert) === 'low'">LOW STOCK</span>
      </div>
    </div>
  </div>

  <!-- Resolve Confirmation Modal -->
  <div class="modal-overlay" *ngIf="showResolveModal" (click)="closeResolveModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <i class="bi bi-question-circle-fill"></i>
        <h3>Confirm Resolution</h3>
      </div>
      <div class="modal-body">
        <p>Are you sure you want to mark this alert as resolved?</p>
        <div class="product-info-modal" *ngIf="alertToResolve">
          <strong>{{ alertToResolve.product.name }}</strong>
          <span class="text-muted">{{ alertToResolve.product.brand }}</span>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-cancel" (click)="closeResolveModal()">
          <i class="bi bi-x-lg"></i> Cancel
        </button>
        <button class="btn btn-confirm" (click)="confirmResolveAlert()">
          <i class="bi bi-check-lg"></i> Confirm
        </button>
      </div>
    </div>
  </div>
</div>
