<div class="admin-container">
  <div class="admin-header">
    <h2>
      <!-- <img src="assets/logo.jpg" alt="Logo" height="50" class="mr-2"
        style="vertical-align: middle; mix-blend-mode: multiply;"> -->
      Admin Dashboard
    </h2>
    <div class="admin-nav">
      <button class="nav-btn" [class.active]="activeTab === 'dashboard'" (click)="activeTab = 'dashboard'">
        <i class="bi bi-speedometer2"></i> Dashboard
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'products'" (click)="activeTab = 'products'">
        <i class="bi bi-box"></i> Products
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'discounts'" (click)="activeTab = 'discounts'">
        <i class="bi bi-percent"></i> Discounts
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'users'" (click)="activeTab = 'users'">
        <i class="bi bi-people"></i> Users
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'advertisements'" (click)="activeTab = 'advertisements'">
        <i class="bi bi-images"></i> Advertisements
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'orders'" (click)="activeTab = 'orders'">
        <i class="bi bi-receipt"></i> Orders
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'billing'" (click)="activeTab = 'billing'">
        <i class="bi bi-cash-coin"></i> Billing
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'prescriptions'" (click)="activeTab = 'prescriptions'">
        <i class="bi bi-file-medical"></i> Prescriptions
      </button>
      <button class="nav-btn" [class.active]="activeTab === 'messages'" (click)="activeTab = 'messages'">
        <i class="bi bi-envelope"></i> Messages
      </button>
    </div>
  </div>

  <!-- Prescriptions Tab -->
  <div *ngIf="activeTab === 'prescriptions'" class="tab-content">
    <app-prescription-list></app-prescription-list>
  </div>

  <!-- Products Tab -->
  <div *ngIf="activeTab === 'products'" class="tab-content">
    <!-- ... existing product content ... -->
    <!-- Create Product Form -->
    <!-- Product List using PrimeNG DataTable -->
    <div class="product-list">
      <div class="flex align-items-center justify-content-between mb-3">
        <h3>Product List</h3>
        <!-- <button pButton icon="pi pi-plus" class="p-button-rounded p-button-primary"
          (click)="openCreateProductModal()"></button> -->
      </div>
      <p-table [value]="products" [paginator]="true" [rows]="5" [tableStyle]="{ 'min-width': '50rem' }"
        [rowsPerPageOptions]="[5, 10, 20]" responsiveLayout="scroll"
        [globalFilterFields]="['name', 'brand', 'category']">
        <ng-template pTemplate="caption">
          <div class="flex align-items-center justify-content-between">
            <button pButton icon="pi pi-plus" class="p-button-rounded p-button-primary"
              (click)="openCreateProductModal()"></button>
            <span class="p-input-icon-left ml-auto">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt.filterGlobal($event, 'contains')"
                placeholder="Search products..." />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="name">Name <p-sortIcon field="name"></p-sortIcon></th>
            <th pSortableColumn="brand">Brand <p-sortIcon field="brand"></p-sortIcon></th>
            <th pSortableColumn="category">Category <p-sortIcon field="category"></p-sortIcon></th>
            <th pSortableColumn="price">Price <p-sortIcon field="price"></p-sortIcon></th>
            <th>Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
          <tr>
            <td>{{ product.name }}</td>
            <td>{{ product.brand }}</td>
            <td>{{ product.category }}</td>
            <td>{{ product.price | currency : 'INR' : 'symbol' : '1.2-2' }}</td>
            <td>
              <button pButton type="button" pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
                (click)="selectProduct(product)" title="Edit"></button>
              <button pButton type="button" pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger"
                (click)="deleteProduct(product.id)" title="Delete"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- Create Product Modal -->
    <div class="modal-overlay" *ngIf="showCreateProductModal" (click)="closeCreateProductModal()">
      <div class="modal-content" (click)="$event.stopPropagation()" style="max-width: 600px;">
        <div class="modal-header">
          <h3>Create New Product</h3>
          <button class="close-btn" (click)="closeCreateProductModal()">&times;</button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="createProduct()">
            <div class="form-group">
              <label>Name</label>
              <input type="text" [(ngModel)]="newProduct.name" name="name" class="form-control" required>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea [(ngModel)]="newProduct.description" name="description" class="form-control"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Brand</label>
                <input type="text" [(ngModel)]="newProduct.brand" name="brand" class="form-control">
              </div>
              <div class="form-group">
                <label>Category</label>
                <input type="text" [(ngModel)]="newProduct.category" name="category" class="form-control">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Price</label>
                <input type="number" [(ngModel)]="newProduct.price" name="price" class="form-control">
              </div>
              <div class="form-group">
                <label>Stock</label>
                <input type="number" [(ngModel)]="newProduct.stockQuantity" name="stockQuantity" class="form-control"
                  required>
              </div>
            </div>
            <div class="form-group">
              <label>Image URL</label>
              <input type="text" [(ngModel)]="newProduct.imageUrl" name="imageUrl" class="form-control">
            </div>
            <div class="modal-footer" style="padding: 0; margin-top: 1.5rem; border: none;">
              <button type="button" class="btn-secondary" (click)="closeCreateProductModal()"
                style="margin-right: 0.5rem;">Cancel</button>
              <button type="submit" class="btn-update">Create Product</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Update Product Form -->
    <!-- Update Product Modal -->
    <div class="modal-overlay" *ngIf="selectedProduct" (click)="selectedProduct = null">
      <div class="modal-content" (click)="$event.stopPropagation()" style="max-width: 600px;">
        <div class="modal-header">
          <h3>Edit Product</h3>
          <button class="close-btn" (click)="selectedProduct = null">&times;</button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="updateProduct()">
            <div class="form-group">
              <label>Name</label>
              <input type="text" [(ngModel)]="selectedProduct.name" name="name" class="form-control" required>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea [(ngModel)]="selectedProduct.description" name="description" class="form-control"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Brand</label>
                <input type="text" [(ngModel)]="selectedProduct.brand" name="brand" class="form-control">
              </div>
              <div class="form-group">
                <label>Category</label>
                <input type="text" [(ngModel)]="selectedProduct.category" name="category" class="form-control">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Price</label>
                <input type="number" [(ngModel)]="selectedProduct.price" name="price" class="form-control">
              </div>
              <div class="form-group">
                <label>Stock</label>
                <input type="number" [(ngModel)]="selectedProduct.stockQuantity" name="stockQuantity"
                  class="form-control" required>
              </div>
            </div>
            <div class="form-group">
              <label>Image URL</label>
              <input type="text" [(ngModel)]="selectedProduct.imageUrl" name="imageUrl" class="form-control">
            </div>
            <div class="modal-footer" style="padding: 0; margin-top: 1.5rem; border: none;">
              <button type="button" class="btn-secondary" (click)="selectedProduct = null"
                style="margin-right: 0.5rem;">Cancel</button>
              <button type="submit" class="btn-update">Update Product</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Discounts Tab -->
  <div *ngIf="activeTab === 'discounts'" class="tab-content">
    <!-- Create Discount Form -->
    <!-- Discount List -->
    <div class="product-list">
      <div class="flex align-items-center justify-content-between mb-3">
        <h3>Discount List</h3>

      </div>
      <p-table [value]="discounts" [paginator]="true" [rows]="5" [tableStyle]="{ 'min-width': '50rem' }"
        [rowsPerPageOptions]="[5, 10, 20]" responsiveLayout="scroll" [globalFilterFields]="['code', 'description']">
        <ng-template pTemplate="caption">
          <div class="flex align-items-center justify-content-between">
            <button pButton icon="pi pi-plus" class="p-button-rounded p-button-primary"
              (click)="openCreateDiscountModal()"></button>
            <span class="p-input-icon-left ml-auto">
              <i class="pi pi-search"></i>
              <input pInputText type="text" (input)="dt2.filterGlobal($event, 'contains')"
                placeholder="Search discounts..." />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="code">Code <p-sortIcon field="code"></p-sortIcon></th>
            <th pSortableColumn="description">Description <p-sortIcon field="description"></p-sortIcon></th>
            <th pSortableColumn="percentage">Percentage <p-sortIcon field="percentage"></p-sortIcon></th>
            <th pSortableColumn="fixedAmount">Fixed Amount <p-sortIcon field="fixedAmount"></p-sortIcon></th>
            <th>Product</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-discount>
          <tr>
            <td>{{ discount.code }}</td>
            <td>{{ discount.description }}</td>
            <td>{{ discount.percentage }}%</td>
            <td>{{ discount.fixedAmount | currency }}</td>
            <td>{{ discount.product ? discount.product.name : 'Global' }}</td>
            <td>
              <span class="badge" [class]="discount.active ? 'bg-success' : 'bg-danger'">
                {{ discount.active ? 'Active' : 'Inactive' }}
              </span>
            </td>
            <td>
              <button pButton type="button" pRipple icon="pi pi-pencil" class="p-button-rounded p-button-success mr-2"
                (click)="selectDiscount(discount)" title="Edit"></button>
              <button pButton type="button" pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger"
                (click)="deleteDiscount(discount.id)" title="Delete"></button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>

    <!-- Create Discount Modal -->
    <div class="modal-overlay" *ngIf="showCreateDiscountModal" (click)="closeCreateDiscountModal()">
      <div class="modal-content" (click)="$event.stopPropagation()" style="max-width: 600px;">
        <div class="modal-header">
          <h3>Create New Discount</h3>
          <button class="close-btn" (click)="closeCreateDiscountModal()">&times;</button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="createDiscount()">
            <div class="form-group">
              <label>Discount Code</label>
              <input type="text" [(ngModel)]="newDiscount.code" name="code" class="form-control" required>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea [(ngModel)]="newDiscount.description" name="description" class="form-control"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Percentage (%)</label>
                <input type="number" [(ngModel)]="newDiscount.percentage" name="percentage" class="form-control"
                  step="0.01">
              </div>
              <div class="form-group">
                <label>Fixed Amount</label>
                <input type="number" [(ngModel)]="newDiscount.fixedAmount" name="fixedAmount" class="form-control"
                  step="0.01">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Start Date</label>
                <input type="datetime-local" [(ngModel)]="newDiscount.startDate" name="startDate" class="form-control">
              </div>
              <div class="form-group">
                <label>End Date</label>
                <input type="datetime-local" [(ngModel)]="newDiscount.endDate" name="endDate" class="form-control">
              </div>
            </div>
            <div class="form-group">
              <label>Applicable Product</label>
              <select [(ngModel)]="newDiscount.productId" name="productId" class="form-control">
                <option value="">Global Discount (all products)</option>
                <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
              </select>
            </div>
            <div class="modal-footer" style="padding: 0; margin-top: 1.5rem; border: none;">
              <button type="button" class="btn-secondary" (click)="closeCreateDiscountModal()"
                style="margin-right: 0.5rem;">Cancel</button>
              <button type="submit" class="btn-update">Create Discount</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Update Discount Modal -->
    <div class="modal-overlay" *ngIf="selectedDiscount" (click)="selectedDiscount = null">
      <div class="modal-content" (click)="$event.stopPropagation()" style="max-width: 600px;">
        <div class="modal-header">
          <h3>Edit Discount</h3>
          <button class="close-btn" (click)="selectedDiscount = null">&times;</button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="updateDiscount()">
            <div class="form-group">
              <label>Discount Code</label>
              <input type="text" [(ngModel)]="selectedDiscount.code" name="code" class="form-control" required>
            </div>
            <div class="form-group">
              <label>Description</label>
              <textarea [(ngModel)]="selectedDiscount.description" name="description" class="form-control"></textarea>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Percentage (%)</label>
                <input type="number" [(ngModel)]="selectedDiscount.percentage" name="percentage" class="form-control"
                  step="0.01">
              </div>
              <div class="form-group">
                <label>Fixed Amount</label>
                <input type="number" [(ngModel)]="selectedDiscount.fixedAmount" name="fixedAmount" class="form-control"
                  step="0.01">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label>Start Date</label>
                <input type="datetime-local" [(ngModel)]="selectedDiscount.startDate" name="startDate"
                  class="form-control">
              </div>
              <div class="form-group">
                <label>End Date</label>
                <input type="datetime-local" [(ngModel)]="selectedDiscount.endDate" name="endDate" class="form-control">
              </div>
            </div>
            <div class="form-group">
              <label>Applicable Product</label>
              <select [(ngModel)]="selectedDiscount.productId" name="productId" class="form-control">
                <option value="">Global Discount (all products)</option>
                <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
              </select>
            </div>
            <div class="modal-footer" style="padding: 0; margin-top: 1.5rem; border: none;">
              <button type="button" class="btn-secondary" (click)="selectedDiscount = null"
                style="margin-right: 0.5rem;">Cancel</button>
              <button type="submit" class="btn-update">Update Discount</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Users Tab -->
  <div *ngIf="activeTab === 'users'" class="tab-content">
    <app-user-list></app-user-list>
  </div>

  <!-- Dashboard Tab -->
  <div *ngIf="activeTab === 'dashboard'" class="tab-content">
    <app-dashboard></app-dashboard>
  </div>

  <!-- Advertisements Tab -->
  <div *ngIf="activeTab === 'advertisements'" class="tab-content">
    <app-admin-advertisement></app-admin-advertisement>
  </div>

  <!-- Orders Tab -->
  <div *ngIf="activeTab === 'orders'" class="tab-content">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h3>Order Workflow </h3>
        <button pButton icon="pi pi-refresh" label="Refresh" class="p-button-outlined" (click)="loadOrders()"></button>
      </div>

      <div class="kanban-board">
        <!-- Pending Column -->
        <div class="kanban-column pending">
          <div class="column-header">
            <span class="badge bg-warning text-dark">PENDING</span>
            <span class="count">{{ordersPending.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersPending">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <p class="card-text small text-muted">{{order.orderDate | date:'shortDate'}}</p>
                <div class="d-flex gap-2 mt-2">
                  <button class="btn btn-sm btn-info flex-grow-1" (click)="moveOrder(order, 'PRESCRIPTION_VERIFIED')">Verify Rx</button>
                  <button class="btn btn-sm btn-outline-danger" (click)="moveOrder(order, 'CANCELLED')"><i class="bi bi-x"></i></button>
                </div>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Prescription Verified Column -->
        <div class="kanban-column prescription-verified">
          <div class="column-header">
            <span class="badge bg-info text-dark">RX VERIFIED</span>
            <span class="count">{{ordersPrescriptionVerified.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersPrescriptionVerified">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <button class="btn btn-sm btn-primary w-100 mt-2" (click)="moveOrder(order, 'LAB_PROCESSING')">Send to Lab</button>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Lab Processing Column -->
        <div class="kanban-column lab-processing">
          <div class="column-header">
            <span class="badge bg-primary">LAB</span>
            <span class="count">{{ordersLabProcessing.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersLabProcessing">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <button class="btn btn-sm btn-warning w-100 mt-2" (click)="moveOrder(order, 'QUALITY_CHECK')">Complete Lab</button>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Quality Check Column -->
        <div class="kanban-column quality-check">
          <div class="column-header">
            <span class="badge bg-secondary">QC CHECK</span>
            <span class="count">{{ordersQualityCheck.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersQualityCheck">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <button class="btn btn-sm btn-success w-100 mt-2" (click)="moveOrder(order, 'SHIPPED')">Pass QC & Ship</button>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Shipped Column -->
        <div class="kanban-column shipped">
          <div class="column-header">
            <span class="badge bg-dark">SHIPPED</span>
            <span class="count">{{ordersShipped.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersShipped">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <button class="btn btn-sm btn-success w-100 mt-2" (click)="moveOrder(order, 'DELIVERED')">Mark Delivered</button>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Delivered Column -->
        <div class="kanban-column delivered">
          <div class="column-header">
            <span class="badge bg-success">DELIVERED</span>
            <span class="count">{{ordersDelivered.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersDelivered">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <p class="card-text small text-muted">Completed</p>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

         <!-- Cancelled Column -->
         <div class="kanban-column cancelled">
          <div class="column-header">
            <span class="badge bg-secondary">CANCELLED</span>
            <span class="count">{{ordersCancelled.length}}</span>
          </div>
          <div class="kanban-cards">
            <div class="card mb-2" *ngFor="let order of ordersCancelled">
              <div class="card-body p-3">
                <h5 class="card-title d-flex justify-content-between">
                  <span>#{{order.id}}</span>
                  <small>{{order.totalAmount | currency:'INR'}}</small>
                </h5>
                <p class="card-text small mb-1">{{order.user?.username}}</p>
                <button class="btn btn-sm btn-link w-100 mt-1" (click)="viewOrder(order)">View Details</button>
              </div>
            </div>
          </div>
        </div>

      </div>

    <!-- Order Details Modal -->
    <div class="modal-overlay" *ngIf="selectedOrderForView" (click)="closeOrderView()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Order #{{selectedOrderForView.id}} Details</h3>
          <button class="close-btn" (click)="closeOrderView()">&times;</button>
        </div>
        <div class="modal-body">
          <div class="detail-section">
            <h4>Customer Information</h4>
            <p><strong>Name:</strong> {{selectedOrderForView.user?.username}}</p>
            <p><strong>Email:</strong> {{selectedOrderForView.user?.email}}</p>
          </div>

          <div class="detail-section">
            <h4>Shipping Address</h4>
            <p>{{selectedOrderForView.shippingAddress}}</p>
          </div>

          <div class="detail-section">
            <h4>Order Items</h4>
            <div class="items-list">
              <div class="order-item" *ngFor="let item of selectedOrderForView.orderItems">
                <div class="item-info">
                  <span class="item-name">{{item.product?.name}}</span>
                  <span class="item-meta">Qty: {{item.quantity}}</span>
                </div>
                <span class="item-price">{{item.unitPrice | currency:'INR'}}</span>
              </div>
            </div>
          </div>

          <div class="detail-section total-section">
            <div class="total-row">
              <span>Total Amount:</span>
              <span class="total-amount">{{selectedOrderForView.totalAmount | currency:'INR'}}</span>
            </div>
            <div class="status-row">
              <span class="status-badge" [ngClass]="getStatusClass(selectedOrderForView.status)">
                {{selectedOrderForView.status}}
              </span>
              <span class="status-badge" [ngClass]="getPaymentStatusClass(selectedOrderForView.paymentStatus)">
                {{selectedOrderForView.paymentStatus}}
              </span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn-secondary" (click)="closeOrderView()">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Billing Tab -->
  <div *ngIf="activeTab === 'billing'" class="tab-content">
    <app-billing></app-billing>
  </div>

  <!-- Messages Tab -->
  <div *ngIf="activeTab === 'messages'" class="tab-content">
    <div class="product-list">
      <h3>Messages</h3>
      <p-table [value]="messages" [paginator]="true" [rows]="10" [tableStyle]="{ 'min-width': '50rem' }"
        [rowsPerPageOptions]="[10, 20, 50]" responsiveLayout="scroll">
        <ng-template pTemplate="header">
          <tr>
            <th>Date</th>
            <th>Name</th>
            <th>Email</th>
            <th>Subject</th>
            <th>Message</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-msg>
          <tr>
            <td>{{msg.createdAt | date:'short'}}</td>
            <td>{{msg.name}}</td>
            <td>{{msg.email}}</td>
            <td>{{msg.subject}}</td>
            <td>{{msg.message}}</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</div>

<!-- Global Confirmation Modal -->
<div class="modal-overlay" *ngIf="showConfirmationModal" (click)="closeConfirmationModal()">
  <div class="modal-content confirmation-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Confirm Action</h3>
      <button class="close-btn" (click)="closeConfirmationModal()">&times;</button>
    </div>
    <div class="modal-body text-center p-4">
      <div class="mb-3">
        <i class="bi bi-exclamation-circle text-warning" style="font-size: 3rem;"></i>
      </div>
      <p class="mb-4" style="font-size: 1.1rem;">
        Are you sure you want to move <strong>Order #{{pendingOrderAction?.id}}</strong> to <br>
        <span class="badge bg-primary mt-2" style="font-size: 1rem;">{{getFormattedStatus(pendingNewStatus)}}</span>?
      </p>
      <div class="d-flex justify-content-center gap-3">
        <button class="btn-secondary" (click)="closeConfirmationModal()">Cancel</button>
        <button class="btn-update" (click)="confirmMoveOrder()">Yes, Move Order</button>
      </div>
    </div>
  </div>
</div>